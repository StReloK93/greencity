"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[185],{6510:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{Z:()=>a});var a=function(){function e(t){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="keysArr",a=[{frame:0,value:BABYLON.Color3.FromHexString("#C8F5FF").toLinearSpace()},{frame:20,value:new BABYLON.Color3(1,1,1)},{frame:20,value:new BABYLON.Color3(1,1,1)},{frame:40,value:BABYLON.Color3.FromHexString("#C8F5FF").toLinearSpace()}],r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,this.scene=t}var t,n,a;return t=e,n=[{key:"hover",value:function(e){var t=this,n=e.material;e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOverTrigger},(function(){t.scene.activeMesh!=e&&(e.material=t.scene.getMaterialByName("hover"))}))),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOutTrigger},(function(){t.scene.activeMesh!=e&&(e.material=n)})))}},{key:"animate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.keysArr;this.animation=new BABYLON.Animation("newBlink",e,60,t,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),this.animation.setKeys(n),this.animationGroup=new BABYLON.AnimationGroup("newBlinkGroup")}},{key:"animatePlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&this.animate("material.diffuseColor",BABYLON.Animation.ANIMATIONTYPE_COLOR3),e.material=this.scene.getMaterialByName("animated"),this.animationGroup.addTargetedAnimation(this.animation,e),this.animationGroup.play(!0)}},{key:"animateStop",value:function(){this.animationGroup.stop(),this.animationGroup.dispose()}}],n&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},9026:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(3645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".text-holo[data-v-d0338b4c]{color:#a5e6ff}.lift-enter-active[data-v-d0338b4c],.lift-leave-active[data-v-d0338b4c]{opacity:1;transform:translateY(0);transition:.3s}.lift-enter-from[data-v-d0338b4c],.lift-leave-to[data-v-d0338b4c]{opacity:0;transform:translateY(100%)}",""]);const i=a},3185:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(821),a={key:0,class:"uppercase fixed top-0 right-0 text-green-400"},i=(0,r.Uk)("Maydonlar"),o={key:1,class:"uppercase fixed top-0 right-0 text-green-400"},s=(0,r.Uk)("Kirish"),c={class:"h-full w-full border-transparent",ref:"BuilderCanvas"};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.createScene(),this.setEnvironment()}var t,n,r;return t=e,(n=[{key:"createScene",value:function(){var e=this,t=new BABYLON.Engine(this.canvas,!0);this.scene=new BABYLON.Scene(t),t.runRenderLoop((function(){e.scene.render()})),window.addEventListener("resize",(function(){t.resize()}))}},{key:"setEnvironment",value:function(){var e=BABYLON.CubeTexture.CreateFromPrefilteredData("./textures/hdrmini.env",this.scene);this.scene.environmentTexture=e,this.scene.clearColor=new BABYLON.Color3(.8,.8,.8,1)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var v=f((function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="light",r=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(1,1,0)),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.light.intensity=.5})),d=n(6510);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.actions=new d.Z(t),this._materials()}var t,n,r;return t=e,(n=[{key:"_materials",value:function(){var e=new BABYLON.StandardMaterial("hover",this.scene);e.diffuseColor=BABYLON.Color3.FromHexString("#C8F5FF").toLinearSpace(),e.specularColor=new BABYLON.Color3(0,0,0),new BABYLON.StandardMaterial("animated",this.scene).specularColor=new BABYLON.Color3(0,0,0);var t=new BABYLON.StandardMaterial("ground",this.scene);t.diffuseColor=new BABYLON.Color3(1,1,1),t.specularColor=new BABYLON.Color3(0,0,0)}},{key:"_createGround",value:function(){var e=BABYLON.MeshBuilder.CreateGround("ground",{width:2e3,height:2e3},this.scene);e.actionManager=new BABYLON.ActionManager(this.scene),e.onpickable=!1,e.material=this.scene.getMaterialByName("ground")}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),g=n(7757),b=n.n(g);function w(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.Actions=new d.Z(t),this.Import(),this.pickidMesh(),this.scene.onDataLoadedObservable.add((function(){n.getActiveMeshes(),n.scene.getMaterialByName("pol").albedoColor=new BABYLON.Color3(.7,.7,.6)}))}var t,n,r,a,i;return t=e,n=[{key:"pickidMesh",value:function(){var e=this;this.scene.onPointerPick=function(t,n){var r=n.pickedMesh;0!=t.button&&2!=t.button||e.clearActiveMesh(),console.log(r.name),r&&0!=r.metadata.gltf.extras.pickable&&(store.state.mesh.active=r,e.scene.activeMesh=r,e.Actions.animatePlay(r,!0),e.getTerritories(r.name))}}},{key:"clearActiveMesh",value:function(){store.state.mesh.active&&(this.Actions.animateStop(),this.scene.activeMesh.material=this.scene.activeMesh.mainmaterial,this.scene.activeMesh=null,store.state.mesh.active=null,store.state.territories=null)}},{key:"getTerritories",value:(a=b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/territories/getall",{name:t});case 2:n=e.sent,r=n.data,store.state.territories=r;case 5:case"end":return e.stop()}}),e)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){w(i,n,r,o,s,"next",e)}function s(e){w(i,n,r,o,s,"throw",e)}o(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"Import",value:function(){BABYLON.SceneLoader.AppendAsync("./models/view.glb",void 0,this.scene,(function(e){e.lengthComputable&&(e.loaded,e.total)}),".glb")}},{key:"getActiveMeshes",value:function(){var e=this;this.activeMeshes=this.scene.getNodeByName("active")._children,this.activeMeshes.forEach((function(t){t.actionManager=new BABYLON.ActionManager(e.scene),t.mainmaterial=t.material,e.Actions.hover(t)}))}}],n&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="camera",a=new BABYLON.ArcRotateCamera("camera",1.294,.965,100,new BABYLON.Vector3(0,0,0)),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,this.canvas=t,this.camera.attachControl(this.canvas,!0),this.limits()}var t,n,r;return t=e,(n=[{key:"limits",value:function(){this.camera.useBouncingBehavior=!0,this.camera.lowerRadiusLimit=25,this.camera.upperRadiusLimit=240,this.camera.inputs.attached.keyboard.detachControl(),this.camera.inputs.attached.pointers.buttons=[1,2]}}])&&A(t.prototype,n),r&&A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var k={ref:"information",class:"fixed bg-white flex shadow bottom-0 left-0 h-52 w-full p-5 border-t border-green-400"};const L={props:["Engine"],data:function(){return{Territories:null}},mounted:function(){console.log(store.state.territories)}};var C=n(3744);const N={data:function(){return{Engine:null}},mounted:function(){var e,t,n,r;this.Engine=(e=this.$refs.BuilderCanvas,t=new u(e),n=new O(e),r=new p(t.scene),{Scene:t,Camera:n,Light:new v,Meshes:r,Import:new B(t.scene)})},unmounted:function(){this.Engine.Import.clearActiveMesh()},components:{HomePanel:(0,C.Z)(L,[["render",function(e,t,n,a,i,o){var s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("main",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.$store.state.territories,(function(e){return(0,r.wg)(),(0,r.j4)(s,{class:"p-2 mx-2 h-full bg-gray-200 shadow-md w-40 uppercase flex items-center justify-center font-bold",to:{name:"territory",params:{id:e.id}},key:e},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,r.zw)(e.name),1)]})),_:2},1032,["to"])})),128))],512)}]])}};var Y=n(3379),M=n.n(Y),x=n(9026),P={insert:"head",singleton:!1};M()(x.Z,P);x.Z.locals;const E=(0,C.Z)(N,[["render",function(e,t,n,l,u,h){var f=(0,r.up)("router-link"),v=(0,r.up)("HomePanel");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.$store.state.user?((0,r.wg)(),(0,r.iD)("main",a,[(0,r.Wm)(f,{class:"shadow inline-block p-2 px-4 m-3 border border-green-400 hover:bg-green-400 hover:text-white",to:"/territories"},{default:(0,r.w5)((function(){return[i]})),_:1}),(0,r._)("button",{onClick:t[0]||(t[0]=function(t){return e.$store.dispatch("logout")}),class:"uppercase shadow inline-block text-green-400 p-2 px-4 m-3 border border-green-400 hover:bg-green-400 hover:text-white"},"Tizimdan chiqish")])):((0,r.wg)(),(0,r.iD)("main",o,[(0,r.Wm)(f,{class:"shadow inline-block p-2 px-4 m-3 border border-green-400 hover:bg-green-400 hover:text-white",to:"/login"},{default:(0,r.w5)((function(){return[s]})),_:1})])),(0,r._)("canvas",c,null,512),(0,r.Wm)(r.uT,{name:"lift"},{default:(0,r.w5)((function(){return[u.Engine&&e.$store.state.territories?((0,r.wg)(),(0,r.j4)(v,{key:0,Engine:u.Engine},null,8,["Engine"])):(0,r.kq)("",!0)]})),_:1})],64)}],["__scopeId","data-v-d0338b4c"]])}}]);