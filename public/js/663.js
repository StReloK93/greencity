"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[663],{4214:(e,t,n)=>{n.d(t,{Z:()=>a});const a={loaderFile:function(e){window.onkeyup=function(t){107==t.keyCode&&(store.state.inspector?e.debugLayer.show({embedMode:!0}):e.debugLayer.hide(),store.state.inspector=!store.state.inspector)}}}},6510:(e,t,n)=>{function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,{Z:()=>r});var r=function(){function e(t){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,a="keysArr",r=[{frame:0,value:BABYLON.Color3.FromHexString("#C8F5FF").toLinearSpace()},{frame:20,value:new BABYLON.Color3(1,1,1)},{frame:20,value:new BABYLON.Color3(1,1,1)},{frame:40,value:BABYLON.Color3.FromHexString("#C8F5FF").toLinearSpace()}],a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,this.scene=t}var t,n,r;return t=e,n=[{key:"hover",value:function(e){var t=this;e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOverTrigger},(function(){t.scene.activeMesh!=e&&(e.material=t.scene.getMaterialByName("hover"))}))),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOutTrigger},(function(){t.scene.activeMesh!=e&&(e.material=e.mainmaterial)})))}},{key:"hoverNode",value:function(e){var t=this;e.forEach((function(e){e.mainmaterial=e.material,e.actionManager=new BABYLON.ActionManager(t.scene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOverTrigger},(function(){var n=!0;t.scene.activeMesh&&e.parent==t.scene.activeMesh&&(n=!1),n&&e.parent._children.forEach((function(e){e.material=t.scene.getMaterialByName("hover")}))}))),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnPointerOutTrigger},(function(){var n=!0;t.scene.activeMesh&&e.parent==t.scene.activeMesh&&(n=!1),n&&e.parent._children.forEach((function(e){e.material=e.mainmaterial}))})))}))}},{key:"animate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.keysArr;this.animation=new BABYLON.Animation("newBlink",e,60,t,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),this.animation.setKeys(n),this.animationGroup=new BABYLON.AnimationGroup("newBlinkGroup")}},{key:"animatePlay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&this.animate("material.diffuseColor",BABYLON.Animation.ANIMATIONTYPE_COLOR3),1==a?e.forEach((function(e){e.material=t.scene.getMaterialByName("animated"),t.animationGroup.addTargetedAnimation(t.animation,e)})):(e.material=this.scene.getMaterialByName("animated"),this.animationGroup.addTargetedAnimation(this.animation,e)),this.animationGroup.play(!0)}},{key:"animateStop",value:function(){this.animationGroup.stop(),this.animationGroup.dispose(),this.scene.activeMesh._isMesh?this.scene.activeMesh.material=this.scene.activeMesh.mainmaterial:this.scene.activeMesh._children.forEach((function(e){e.material=e.mainmaterial}))}}],n&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},6318:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".text-holo[data-v-e8a56eee]{color:#a5e6ff}.lift-enter-active[data-v-e8a56eee],.lift-leave-active[data-v-e8a56eee]{opacity:1;transform:translateY(0);transition:.3s}.lift-enter-from[data-v-e8a56eee],.lift-leave-to[data-v-e8a56eee]{opacity:0;transform:translateY(100%)}",""]);const i=r},8518:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(821),r={class:"fixed top-0 right-16 mx-2 my-4"},i={key:0,class:"flex"},o=(0,a.Uk)(" Uchastkalar "),s=(0,a._)("i",{class:"gg-clapper-board ml-3"},null,-1),c=[(0,a.Uk)(" Chiqish "),(0,a._)("i",{class:"gg-log-out ml-3 mr-1"},null,-1)],l={key:1,class:"flex"},u=(0,a.Uk)(" Kirish "),h=(0,a._)("i",{class:"gg-log-in ml-5 mr-0"},null,-1);const f={},d=(0,n(3744).Z)(f,[["render",function(e,t){var n=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",r,[e.$store.state.user?((0,a.wg)(),(0,a.iD)("div",i,["territories"!=e.$route.name?((0,a.wg)(),(0,a.j4)(n,{key:0,class:"custom-btn",to:"/territories"},{default:(0,a.w5)((function(){return[o,s]})),_:1})):(0,a.kq)("",!0),(0,a._)("button",{onClick:t[0]||(t[0]=function(t){return e.$store.dispatch("logout")}),class:"custom-btn ml-4"},c)])):((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(n,{class:"custom-btn",to:"/login"},{default:(0,a.w5)((function(){return[u,h]})),_:1})]))])}]])},4663:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(821),r={class:"h-full w-full border-transparent",ref:"BuilderCanvas"};function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.createScene(),this.setEnvironment()}var t,n,a;return t=e,(n=[{key:"createScene",value:function(){var e=this,t=new BABYLON.Engine(this.canvas,!0);this.scene=new BABYLON.Scene(t),this.scene.ambientColor=new BABYLON.Color3(1,1,1),t.runRenderLoop((function(){e.scene.render()})),window.addEventListener("resize",(function(){t.resize()}))}},{key:"setEnvironment",value:function(){var e=BABYLON.CubeTexture.CreateFromPrefilteredData("./textures/hdrmini.env",this.scene);this.scene.environmentTexture=e,this.scene.clearColor=new BABYLON.Color3(.8,.8,.8,1)}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=c((function e(){var t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="light",a=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(1,1,0)),n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.light.intensity=.75})),u=n(6510);function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.actions=new u.Z(t),this._materials()}var t,n,a;return t=e,(n=[{key:"_materials",value:function(){var e=new BABYLON.StandardMaterial("hover",this.scene);e.diffuseColor=BABYLON.Color3.FromHexString("#08e5eF").toLinearSpace(),e.ambientColor=BABYLON.Color3.FromHexString("#4C4C4C"),e.specularColor=new BABYLON.Color3(0,0,0);var t=new BABYLON.StandardMaterial("animated",this.scene);t.ambientColor=BABYLON.Color3.FromHexString("#4C4C4C"),t.specularColor=new BABYLON.Color3(0,0,0);var n=new BABYLON.StandardMaterial("ground",this.scene);n.diffuseColor=new BABYLON.Color3(1,1,1),n.specularColor=new BABYLON.Color3(0,0,0)}},{key:"_createGround",value:function(){var e=BABYLON.MeshBuilder.CreateGround("ground",{width:2e3,height:2e3},this.scene);e.actionManager=new BABYLON.ActionManager(this.scene),e.onpickable=!1,e.material=this.scene.getMaterialByName("ground")}}])&&h(t.prototype,n),a&&h(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=n(7757),m=n.n(d);function v(e,t,n,a,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.Actions=new u.Z(t),this.Import(),this.pickidMesh(),this.scene.onDataLoadedObservable.add((function(){n.getActiveMeshes(),n.scene.getMaterialByName("pol").albedoColor=new BABYLON.Color3(.7,.7,.6)}))}var t,n,a,r,i;return t=e,n=[{key:"pickidMesh",value:function(){var e=this;this.scene.onPointerPick=function(t,n){var a=n.pickedMesh;!store.state.mesh.active||0!=t.button&&2!=t.button||e.clearActiveMesh(t),a.parent.metadata&&a.parent.metadata.gltf.extras&&1==a.parent.metadata.gltf.extras.pickable?(store.state.mesh.active=a.parent,e.scene.activeMesh=a.parent,console.log(a.parent.name),e.Actions.animatePlay(a.parent._children,!0,!0),e.getTerritories(a.parent.name)):a&&1==a.metadata.gltf.extras.pickable&&(store.state.mesh.active=a,e.scene.activeMesh=a,e.Actions.animatePlay(a,!0),e.getTerritories(a.name))}}},{key:"clearActiveMesh",value:function(){this.Actions.animateStop(),this.scene.activeMesh=null,store.state.mesh.active=null,store.state.territories=null}},{key:"getTerritories",value:(r=m().mark((function e(t){var n,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/territories/getall",{name:t});case 2:n=e.sent,a=n.data,store.state.territories=a;case 5:case"end":return e.stop()}}),e)})),i=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){v(i,n,a,o,s,"next",e)}function s(e){v(i,n,a,o,s,"throw",e)}o(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"Import",value:function(){BABYLON.SceneLoader.AppendAsync("./models/view.glb",void 0,this.scene,(function(e){e.lengthComputable&&(e.loaded,e.total)}),".glb")}},{key:"getActiveMeshes",value:function(){var e=this;this.activeMeshes=this.scene.getNodeByName("active")._children,this.activeMeshes.forEach((function(t){e.meshSceneNames(t),t._isMesh?(t.actionManager=new BABYLON.ActionManager(e.scene),t.mainmaterial=t.material,e.Actions.hover(t)):e.Actions.hoverNode(t._children)}))}},{key:"meshSceneNames",value:function(e){var t=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),n=new BABYLON.GUI.Rectangle;n.width="100px",n.height="36px",n.cornerRadius=4,n.color="white",n.thickness=0,n.background="#1db81d6b",t.addControl(n),n.linkWithMesh(e),n.linkOffsetY=-60;var a=new BABYLON.GUI.TextBlock;a.text=e.name.toUpperCase(),a.fontSize="14px",n.addControl(a);var r=new BABYLON.GUI.Ellipse;r.width="5px",r.height="5px",r.color="#1db81d6b",r.thickness=1,r.background="#1db81d6b",t.addControl(r),r.linkWithMesh(e);var i=new BABYLON.GUI.Line;i.lineWidth=2,i.color="#1db81d6b",i.y2=18,i.linkOffsetY=0,t.addControl(i),i.linkWithMesh(e),i.connectedControl=n}}],n&&p(t.prototype,n),a&&p(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w=function(){function e(t){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,a="camera",r=new BABYLON.ArcRotateCamera("camera",1.294,.965,100,new BABYLON.Vector3(0,0,0)),a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,this.canvas=t,this.camera.attachControl(this.canvas,!0),this.limits()}var t,n,a;return t=e,(n=[{key:"limits",value:function(){this.camera.useBouncingBehavior=!0,this.camera.lowerRadiusLimit=50,this.camera.upperRadiusLimit=240,this.camera.inputs.attached.keyboard.detachControl(),this.camera.inputs.attached.pointers.buttons=[1,2]}}])&&B(t.prototype,n),a&&B(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();var b={ref:"information",class:"fixed bg-white flex shadow bottom-0 left-0 h-52 w-full p-5 border-t border-green-400"};const y={props:["Engine"],data:function(){return{Territories:null}}};var A=n(3744);const O=(0,A.Z)(y,[["render",function(e,t,n,r,i,o){var s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.$store.state.territories,(function(e){return(0,a.wg)(),(0,a.j4)(s,{class:"p-2 mx-2 h-full bg-gray-200 shadow-md w-40 uppercase flex items-center justify-center font-bold",to:{name:"territory",params:{id:e.id}},key:e},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,a.zw)(e.name),1)]})),_:2},1032,["to"])})),128))],512)}]]);var C=n(4214);const k={data:function(){return{Engine:null}},mounted:function(){var e,t,n,a;this.Engine=(e=this.$refs.BuilderCanvas,t=new o(e),n=new w(e),a=new f(t.scene),{Scene:t,Camera:n,Light:new l,Meshes:a,Import:new g(t.scene)}),C.Z.loaderFile(this.Engine.Scene.scene)},unmounted:function(){store.state.mesh.active&&this.Engine.Import.clearActiveMesh()},components:{HomePanel:O,Authentication:n(8518).Z}};var L=n(3379),N=n.n(L),M=n(6318),Y={insert:"head",singleton:!1};N()(M.Z,Y);M.Z.locals;const x=(0,A.Z)(k,[["render",function(e,t,n,i,o,s){var c=(0,a.up)("Authentication"),l=(0,a.up)("HomePanel");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(c),(0,a._)("canvas",r,null,512),(0,a.Wm)(a.uT,{name:"lift"},{default:(0,a.w5)((function(){return[o.Engine&&e.$store.state.territories?((0,a.wg)(),(0,a.j4)(l,{key:0,Engine:o.Engine},null,8,["Engine"])):(0,a.kq)("",!0)]})),_:1})],64)}],["__scopeId","data-v-e8a56eee"]])}}]);